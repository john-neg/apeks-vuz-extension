{% extends 'base.html' %}

{% block content %}
<h1 class="display-6">
  {% block title %} Сводная информация по полям рабочих программ плана {% endblock %}
</h1>

<div class="d-grid col-xl-8">
  <div class="h4 mt-2 mb-4 text-white text-center bg-dark fw-normal"><b>{{ plan_name }}</b></div>
</div>

<form action="" method="post" novalidate>
  {{ form.hidden_tag() }}
  <div class="row mb-2">
    <div class="col-xl-8">
      <label class="form-label">{{ form.wp_fields.label }}</label>
      {{ form.wp_fields(class="form-select form-select-ld") }}
    </div>
  </div>
  {{ form.fields_data(class="btn btn-secondary mb-2") }}
</form>

{% if wp_data %}
  <div>
    <table class="col-md-7 mt-3 table">
      {% for disc in wp_data %}
        {% for wp in wp_data[disc] %}
          <tr class="table-success">
            <td>
              <span style="white-space: pre-line">{{ disc }}</span>
              {% if wp != "none" and current_user.role in (config.ROLE_ADMIN, ) %}
                <a href="{{ url_for('programs.wp_field_edit') }}?wp_id={{ wp }}&parameter={{ wp_field }}"
                   target="_blank"
                   class="btn btn-success btn-block p-0"
                   role="button">Edit</a>
              {% endif %}
            </td>
          </tr>
          <tr>
            <td><span style="white-space: pre-line">{{ wp_data[disc][wp] }}</span></td>
          </tr>
          <tr>
            <td></td>
          </tr>
        {% endfor %}
      {% endfor %}
    </table>
  </div>
{% endif %}

{% endblock %}
